{"version":3,"sources":["webpack:///docs/js/vueboxy.312bc3ce323a01fe1e76.js","webpack:///./src/components/vueboxy/ShadowBox.vue","webpack:///./src/components/vueboxy/ShadowBox.vue?11af","webpack:///./src/components/vueboxy/box.js","webpack:///./src/components/vueboxy/eventBus.js","webpack:///./src/components/vueboxy/comp.js","webpack:///./src/components/vueboxy/vueboxy.js","webpack:///./src/components/vueboxy/mixins/touch.js","webpack:///./src/components/vueboxy/generators/box.js","webpack:///./src/components/vueboxy/generators/comp.js","webpack:///./src/components/vueboxy/generators/vueboxy.js","webpack:///./src/components/vueboxy/mixins/scroll.js","webpack:///./src/components/vueboxy/mixins/select.js","webpack:///./src/components/vueboxy/toolbar.js","webpack:///./src/components/vueboxy/utils.js","webpack:///./src/lib.js","webpack:///ShadowBox.vue"],"names":["webpackJsonp","119","module","exports","__webpack_require__","Component","121","render","_vm","this","_h","$createElement","_self","_c","staticClass","style","staticRenderFns","18","__webpack_exports__","__WEBPACK_IMPORTED_MODULE_0__mixins_touch__","__WEBPACK_IMPORTED_MODULE_1__generators_box__","mixins","props","canvas","type","HTMLDivElement","default","mode","String","responsive","Boolean","index","Number","pos","Object","x","y","w","h","visible","snap","mounted","isMounted","initTouch","beforeDestroy","$emit","destroyListeners","data","comp","posSync","oldSnapPos","visibleSync","computed","classes","vbox-box","vbox-box--input-mode","vbox-box--output-mode","styles","top","left","responsiveStyles","width","height","visibility","getBoundingClientRect","snapPos","Math","round","wasSnapped","old","watch","val","isTouching","setPosition","setVisible","methods","disableTouch","initTap","$refs","overlay","initDrag","initResize","resize","drag","_posSync","touchSync","offset","drop","_posSync2","right","bottom","resizeEnd","20","__WEBPACK_IMPORTED_MODULE_0_vue__","35","__WEBPACK_IMPORTED_MODULE_0__box__","__WEBPACK_IMPORTED_MODULE_1__eventBus__","__WEBPACK_IMPORTED_MODULE_2__mixins_touch__","__WEBPACK_IMPORTED_MODULE_3__generators_comp__","components","box","value","document","body","appendChild","$el","initListeners","boxOrigRect","touch","wasDraggedOntoCanvasHandler","_this","$on","$off","dragStart","36","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_array_for_each__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_array_for_each___default","n","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_get_iterator__","__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_get_iterator___default","__WEBPACK_IMPORTED_MODULE_3__box__","__WEBPACK_IMPORTED_MODULE_4__ShadowBox_vue__","__WEBPACK_IMPORTED_MODULE_4__ShadowBox_vue___default","__WEBPACK_IMPORTED_MODULE_5__toolbar__","__WEBPACK_IMPORTED_MODULE_6__utils__","__WEBPACK_IMPORTED_MODULE_7__eventBus__","__WEBPACK_IMPORTED_MODULE_8__generators_vueboxy__","ShadowBox","a","toolbar","Array","selected","initCanvas","initBoxes","valueWasEmitted","selectedSync","clearSelected","setSelected","selectedBox","boxes","sorted","history","dragOntoCanvasHandler","dropOntoCanvasHandler","dragOntoCanvas","dropOntoCanvas","addBoxes","sortBoxes","pushHistory","isTouchingCanvas","isIntersect","touchBox","addBox","resetBoxes","fixCollisions","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","next","done","boxData","err","return","length","isSelected","$set","_this2","map","sort","b","i","push","_this3","selectedBoxSortIndex","boxIndex","sortIndex","isSelectedBox","restoreBoxFromHistory","reorderSelectedBox","toIndex","oldIndex","getSortIndex","lastIndex","splice","findIndex","_this4","startIndex","nextIndex","boxList","slice","collisionsFound","fixCollision","opponentBox","distance","pushDown","ceil","box1","box2","convertCoord","coords","arguments","beforeDestroyBox","37","__WEBPACK_IMPORTED_MODULE_0_hammerjs__","__WEBPACK_IMPORTED_MODULE_1__scroll__","__WEBPACK_IMPORTED_MODULE_2__select__","tapManager","dragManager","resizeManager","tapHandler","dragStartHandler","dragHandler","dropHandler","resizeStartHandler","resizeHandler","resizeEndHandler","action","isEqual","handleTouch","destroy","el","e","getTouch","add","enableTap","initSelect","disableTap","get","set","enable","on","off","direction","enableDrag","disableDrag","threshold","enableResize","disableResize","hammerEvent","_hammerEvent$center","center","start","getTouchStart","getTouchOffset","rect","deltaX","deltaY","updateTouchOffset","toggleTapSelection","clearBrowserSelections","touchScroll","callCallbacks","tap","resizeStart","56","genContent","class","vbox-box__content","$slots","genOverlay","vbox-box__overlay","vbox-box__overlay--hidden","isSelectedSync","ref","genResize","vbox-box__resize","display","defaultIcon","fa","fa-chevron-right","vbox-box__resize--rotate-45","resizeIcon","57","genBox","$scopedSlots","genCompImage","vbox-comp__image","compImage","vbox-comp","58","genWrapper","vbox-canvas__wrapper","genBoxes","genShadowBox","genToolbar","forEach","key","tools","slot","vbox-canvas","js-vbox-canvas","vbox-canvas--input-mode","vbox-canvas--output-mode","mousedown","target","wrapper","59","scrollTimer","scrollSpeed","scrollFactor","scrollEdge","scrollDimensions","window","clearTimeout","scroll","setTimeout","initScroll","windowWasScrolled","scrollWindow","canvasWasScrolled","scrollCanvas","scrollWidth","scrollHeight","updateScroll","innerWidth","innerHeight","c","wasScrolled","scrollLeft","scrollTop","60","__WEBPACK_IMPORTED_MODULE_0__eventBus__","deselectOtherBoxesHandler","destroyDeselectOtherBoxes","resolveDragResize","deselectOtherBoxes","selection","empty","getSelection","removeAllRanges","61","name","updatePosition","moveToTouch","moveOffScreen","$nextTick","makeAdjustments","canvasRect","overEdgeRight","vbox-toolbar","62","cloneDeep","o","newO","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof___default","prototype","toString","apply","hasOwnProperty","d","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof__","64","defineProperty","__WEBPACK_IMPORTED_MODULE_0__components_vueboxy_vueboxy__","__WEBPACK_IMPORTED_MODULE_1__components_vueboxy_box__","__WEBPACK_IMPORTED_MODULE_2__components_vueboxy_comp__","69","id","floor","random","substring"],"mappings":"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","file":"docs/js/vueboxy.312bc3ce323a01fe1e76.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ 119:\n/***/ (function(module, exports, __webpack_require__) {\n\nvar Component = __webpack_require__(12)(\n  /* script */\n  __webpack_require__(69),\n  /* template */\n  __webpack_require__(121),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 121:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"vbox-shadow-box\",\n    style: (_vm.style)\n  })\n},staticRenderFns: []}\n\n/***/ }),\n\n/***/ 18:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__mixins_touch__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__generators_box__ = __webpack_require__(56);\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  mixins: [__WEBPACK_IMPORTED_MODULE_0__mixins_touch__[\"a\" /* default */], __WEBPACK_IMPORTED_MODULE_1__generators_box__[\"a\" /* default */]],\n\n  props: {\n    'canvas': {\n      type: HTMLDivElement,\n      default: function _default() {\n        return null;\n      }\n    },\n\n    mode: {\n      type: String,\n      default: 'input'\n    },\n\n    responsive: {\n      type: Boolean,\n      default: false\n    },\n\n    'index': {\n      type: Number,\n      default: 0\n    },\n\n    'pos': {\n      type: Object,\n      default: function _default() {\n        return { x: 0, y: 0, w: 0, h: 0 };\n      }\n    },\n\n    'visible': {\n      type: Boolean,\n      default: true\n    },\n\n    'snap': {\n      type: Number,\n      default: 20\n    }\n  },\n\n  mounted: function mounted() {\n    this.isMounted = true;\n    this.initTouch();\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.$emit('beforeDestroy', this.index);\n    this.destroyListeners();\n  },\n  data: function data() {\n    return {\n      isMounted: false,\n      comp: null,\n      posSync: this.pos,\n      oldSnapPos: { x: null, y: null, h: null, w: null },\n      visibleSync: this.visible\n    };\n  },\n\n\n  computed: {\n    classes: function classes() {\n      return {\n        'vbox-box': true,\n        'vbox-box--input-mode': this.mode === 'input',\n        'vbox-box--output-mode': this.mode === 'output'\n      };\n    },\n\n    styles: function styles() {\n      return {\n        'top': this.posSync.y + 'px',\n        'left': this.responsiveStyles.left || this.posSync.x + 'px',\n        'width': this.responsiveStyles.width || this.posSync.w + 'px',\n        'height': this.posSync.h + 'px',\n        'visibility': this.visibleSync ? 'visible' : 'hidden'\n      };\n    },\n\n    responsiveStyles: function responsiveStyles() {\n      if (!this.canvas || !this.responsive) return { left: null, width: null };\n\n      return {\n        left: this.posSync.x / this.canvas.getBoundingClientRect().left * 100 + '%',\n        width: this.posSync.w / this.canvas.getBoundingClientRect().width * 100 + '%'\n      };\n    },\n\n    snapPos: function snapPos() {\n      return {\n        x: Math.round(this.posSync.x / this.snap) * this.snap,\n        y: Math.round(this.posSync.y / this.snap) * this.snap,\n        w: Math.round(this.posSync.w / this.snap) * this.snap,\n        h: Math.round(this.posSync.h / this.snap) * this.snap\n      };\n    },\n\n    wasSnapped: function wasSnapped() {\n      var snapPos = this.snapPos;\n      var old = this.oldSnapPos;\n\n      return snapPos.x !== old.x || snapPos.y !== old.y || snapPos.w !== old.w || snapPos.h !== old.h;\n    }\n  },\n\n  watch: {\n    pos: function pos(val) {\n      var old = this.posSync;\n      if (this.isTouching) return; // <-- Position changes are not allowed from parent during drag/resize.\n      if (val.x !== old.x || val.y !== old.y || val.w !== old.w || val.h !== old.h) this.setPosition(val);\n    },\n\n    visible: function visible(val) {\n      this.setVisible(val);\n    }\n  },\n\n  methods: {\n    initTouch: function initTouch() {\n      if (this.mode === 'output' || this.disableTouch) return;\n\n      this.initTap(this.$refs.overlay);\n      this.initDrag(this.$refs.overlay);\n      this.initResize(this.$refs.resize);\n    },\n    setVisible: function setVisible(visible) {\n      this.visibleSync = visible;\n      this.$emit('visible', visible);\n    },\n    setPosition: function setPosition(pos) {\n      this.oldSnapPos = this.snapPos;\n      this.posSync = pos;\n\n      this.$emit('wasSnapped', this.wasSnapped);\n      this.$emit('pos', this.isTouching ? this.snapPos : this.posSync);\n    },\n\n\n    // Touch Callbacks (from Touch mixin)\n\n    drag: function drag() {\n      var _posSync = this.posSync,\n          x = _posSync.x,\n          y = _posSync.y,\n          w = _posSync.w,\n          h = _posSync.h;\n\n      this.setPosition({ x: x + this.touchSync.offset.left, y: y + this.touchSync.offset.top, w: w, h: h });\n    },\n    drop: function drop() {\n      this.setPosition(this.snapPos);\n    },\n    resize: function resize() {\n      var _posSync2 = this.posSync,\n          x = _posSync2.x,\n          y = _posSync2.y,\n          w = _posSync2.w,\n          h = _posSync2.h;\n\n      this.setPosition({ x: x, y: y, w: w + this.touchSync.offset.right, h: h + this.touchSync.offset.bottom });\n    },\n    resizeEnd: function resizeEnd() {\n      this.setPosition(this.snapPos);\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 20:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_vue__ = __webpack_require__(19);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = (new __WEBPACK_IMPORTED_MODULE_0_vue__[\"a\" /* default */]());\n\n/***/ }),\n\n/***/ 35:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__box__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__eventBus__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__mixins_touch__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__generators_comp__ = __webpack_require__(57);\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  components: { box: __WEBPACK_IMPORTED_MODULE_0__box__[\"a\" /* default */] },\n\n  mixins: [__WEBPACK_IMPORTED_MODULE_2__mixins_touch__[\"a\" /* default */], __WEBPACK_IMPORTED_MODULE_3__generators_comp__[\"a\" /* default */]],\n\n  props: {\n    'value': {\n      type: Object,\n      default: function _default() {\n        return {\n          comp: null,\n          pos: { x: -1000, y: -1000, w: 120, h: 120 },\n          data: null\n        };\n      }\n    }\n  },\n\n  mounted: function mounted() {\n    document.body.appendChild(this.$refs.box.$el);\n    this.initListeners();\n    this.initTouch();\n  },\n  beforeDestroy: function beforeDestroy() {\n    this.destroyListeners();\n  },\n  data: function data() {\n    return {\n      boxOrigRect: null,\n      box: {\n        comp: this.value.comp,\n        data: this.value.data,\n        pos: { x: 0, y: 0, w: this.value.pos.w, h: this.value.pos.h },\n        touch: null\n      },\n      visible: false,\n      wasDraggedOntoCanvasHandler: function wasDraggedOntoCanvasHandler() {}\n    };\n  },\n\n\n  watch: {\n    value: function value(val) {\n      this.box.comp = val.comp || null;\n      this.box.data = val.data || null;\n      this.box.pos.w = val.w || 120;\n      this.box.pos.h = val.h || 120;\n    }\n  },\n\n  methods: {\n    initListeners: function initListeners() {\n      var _this = this;\n\n      this.wasDraggedOntoCanvasHandler = function () {\n        _this.visible = false;\n      };\n      __WEBPACK_IMPORTED_MODULE_1__eventBus__[\"a\" /* default */].$on('wasDraggedOntoCanvas', this.wasDraggedOntoCanvasHandler);\n    },\n    initTouch: function initTouch() {\n      this.initTap(this.$refs.overlay);\n      this.initDrag(this.$refs.overlay);\n    },\n    destroyListeners: function destroyListeners() {\n      __WEBPACK_IMPORTED_MODULE_1__eventBus__[\"a\" /* default */].$off('wasDraggedOntoCanvas', this.wasDraggedOntoCanvasHandler);\n    },\n    dragStart: function dragStart() {\n      this.visible = true;\n    },\n    drag: function drag() {\n      this.box.touch = this.touchSync;\n      __WEBPACK_IMPORTED_MODULE_1__eventBus__[\"a\" /* default */].$emit('dragOntoCanvas', this.box);\n    },\n    drop: function drop() {\n      this.visible = false;\n      this.box.touch = this.touchSync;\n      this.box.pos = { x: -1000, y: -1000, w: this.box.pos.w, h: this.box.pos.h };\n\n      __WEBPACK_IMPORTED_MODULE_1__eventBus__[\"a\" /* default */].$emit('dropOntoCanvas', this.box);\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 36:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_array_for_each__ = __webpack_require__(70);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_array_for_each___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_array_for_each__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__ = __webpack_require__(72);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_get_iterator__ = __webpack_require__(71);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_get_iterator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_get_iterator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__box__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ShadowBox_vue__ = __webpack_require__(119);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__ShadowBox_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4__ShadowBox_vue__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__toolbar__ = __webpack_require__(61);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__utils__ = __webpack_require__(62);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__eventBus__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__generators_vueboxy__ = __webpack_require__(58);\n\n\n\n\n\n\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  components: { box: __WEBPACK_IMPORTED_MODULE_3__box__[\"a\" /* default */], ShadowBox: __WEBPACK_IMPORTED_MODULE_4__ShadowBox_vue___default.a, toolbar: __WEBPACK_IMPORTED_MODULE_5__toolbar__[\"a\" /* default */] },\n\n  mixins: [__WEBPACK_IMPORTED_MODULE_8__generators_vueboxy__[\"a\" /* default */]],\n\n  props: {\n    'value': {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    },\n\n    snap: {\n      type: Number,\n      default: 20\n    },\n\n    'mode': {\n      type: String,\n      default: 'input'\n    },\n\n    'responsive': {\n      type: Boolean\n    },\n\n    'selected': {\n      type: Number,\n      default: null\n    }\n  },\n\n  mounted: function mounted() {\n    this.initCanvas();\n    this.initListeners();\n    this.initBoxes();\n  },\n\n\n  watch: {\n\n    /**\n     * The v-model value given to the component.\n     * It's synced to boxProps.\n     *\n     * @param  {Array} val The new value.\n     * @param  {Array} old The old value.\n     * @return {void}\n     */\n    value: function value(val) {\n      this.valueWasEmitted ? this.valueWasEmitted = false : this.initBoxes();\n    },\n\n    mode: function mode(val) {\n      this.mode = val;\n    },\n\n    responsive: function responsive(val) {\n      this.responsive = val;\n    },\n\n    selected: function selected(val) {\n      if (val === this.selectedSync) return;\n      if (val === null) this.clearSelected();else this.setSelected(val);\n    }\n  },\n\n  computed: {\n    selectedBox: function selectedBox() {\n      return this.boxes[this.selectedSync] || null;\n    }\n  },\n\n  beforeDestroy: function beforeDestroy() {\n    this.destroyListeners();\n  },\n  data: function data() {\n    return {\n      canvas: null,\n      valueWasEmitted: false,\n      boxes: [],\n      sorted: [],\n      history: [],\n      wasSnapped: false,\n      selectedSync: this.selected,\n      isTouching: false,\n      dragOntoCanvasHandler: function dragOntoCanvasHandler() {},\n      dropOntoCanvasHandler: function dropOntoCanvasHandler() {}\n    };\n  },\n\n\n  methods: {\n    initCanvas: function initCanvas() {\n      this.canvas = this.$el;\n    },\n    initListeners: function initListeners() {\n      var _this = this;\n\n      this.dragOntoCanvasHandler = function (box) {\n        _this.dragOntoCanvas(box);\n      };\n      this.dropOntoCanvasHandler = function (box) {\n        _this.dropOntoCanvas(box);\n      };\n      __WEBPACK_IMPORTED_MODULE_7__eventBus__[\"a\" /* default */].$on('dragOntoCanvas', this.dragOntoCanvasHandler);\n      __WEBPACK_IMPORTED_MODULE_7__eventBus__[\"a\" /* default */].$on('dropOntoCanvas', this.dropOntoCanvasHandler);\n    },\n    destroyListeners: function destroyListeners() {\n      __WEBPACK_IMPORTED_MODULE_7__eventBus__[\"a\" /* default */].$off('dragOntoCanvas', this.dragOntoCanvasHandler);\n      __WEBPACK_IMPORTED_MODULE_7__eventBus__[\"a\" /* default */].$off('dropOntoCanvas', this.dropOntoCanvasHandler);\n    },\n    initBoxes: function initBoxes() {\n      this.addBoxes();\n      this.sortBoxes();\n      this.pushHistory();\n    },\n    isTouchingCanvas: function isTouchingCanvas(box) {\n      return this.isIntersect(box.touch, this.$el.getBoundingClientRect());\n    },\n    touchBox: function touchBox(touch) {\n      if (this.selectedBox) this.selectedBox.touch = touch;\n    },\n    dragOntoCanvas: function dragOntoCanvas(box) {\n      if (!this.selectedBox && this.isTouchingCanvas(box)) {\n        this.setSelected(this.addBox(box));\n        this.sortBoxes();\n        __WEBPACK_IMPORTED_MODULE_7__eventBus__[\"a\" /* default */].$emit('wasDraggedOntoCanvas', true);\n      }\n\n      this.touchBox(box.touch);\n    },\n    dropOntoCanvas: function dropOntoCanvas(box) {\n      this.touchBox(box.touch);\n    },\n    drag: function drag(box) {\n      if (!this.wasSnapped) return;\n      this.resetBoxes();\n      this.fixCollisions(box);\n    },\n    drop: function drop(box) {\n      this.sortBoxes();\n      this.pushHistory();\n    },\n    addBoxes: function addBoxes() {\n      this.boxes = [];\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = __WEBPACK_IMPORTED_MODULE_2_babel_runtime_core_js_get_iterator___default()(this.value), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var boxData = _step.value;\n          this.addBox(boxData);\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n    },\n    addBox: function addBox(boxData) {\n      var box = {\n        index: this.boxes.length,\n        comp: boxData.comp,\n        pos: boxData.pos,\n        touch: boxData.touch,\n        isSelected: boxData.isSelected,\n        data: boxData.data\n      };\n\n      this.$set(this.boxes, box.index, box);\n\n      return box.index;\n    },\n    sortBoxes: function sortBoxes() {\n      var _this2 = this;\n\n      this.sorted = this.boxes.map(function (box) {\n        return box.index;\n      }).sort(function (a, b) {\n        return _this2.boxes[a].pos.y - _this2.boxes[b].pos.y;\n      });\n    },\n    pushHistory: function pushHistory() {\n      var value = this.boxes.map(function (box) {\n        return {\n          comp: box.comp,\n          pos: __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default()({}, box.pos),\n          data: __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_6__utils__[\"a\" /* cloneDeep */])(box.data)\n        };\n      });\n\n      this.history = [];\n      this.history.push(value);\n      this.valueWasEmitted = true;\n      this.$emit('input', value);\n    },\n    resetBoxes: function resetBoxes() {\n      var _this3 = this;\n\n      var selectedBoxSortIndex = 0;\n\n      __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_array_for_each___default()(this.sorted, function (boxIndex, sortIndex) {\n        var box = _this3.boxes[boxIndex];\n\n        // Restore box from history.\n        if (!_this3.isSelectedBox(box)) _this3.restoreBoxFromHistory(box);\n\n        // Determine the new sort order for the selected Box.\n        if (box.pos.y + box.pos.h < _this3.selectedBox.pos.y) selectedBoxSortIndex++;\n      });\n\n      this.reorderSelectedBox(selectedBoxSortIndex);\n    },\n    restoreBoxFromHistory: function restoreBoxFromHistory(box) {\n      this.$set(box, 'pos', __WEBPACK_IMPORTED_MODULE_1_babel_runtime_core_js_object_assign___default()({}, this.history[this.history.length - 1][box.index].pos));\n    },\n    reorderSelectedBox: function reorderSelectedBox(toIndex) {\n      var oldIndex = this.getSortIndex(this.selectedBox);\n      var lastIndex = this.sorted.length - 1;\n      toIndex = toIndex > lastIndex ? lastIndex : toIndex;\n\n      this.sorted.splice(oldIndex, 1);\n      this.sorted.splice(toIndex, 0, this.selectedBox.index);\n    },\n    isSelectedBox: function isSelectedBox(box) {\n      return this.selectedBox ? box.index === this.selectedBox.index : false;\n    },\n    getSortIndex: function getSortIndex(box) {\n      return this.sorted.findIndex(function (value) {\n        return value === box.index;\n      });\n    },\n    fixCollisions: function fixCollisions(box) {\n      var _this4 = this;\n\n      var startIndex = this.getSortIndex(box);\n      var nextIndex = startIndex + 1;\n      var lastIndex = this.sorted.length - 1;\n      var boxList = this.sorted.slice(startIndex);\n      var collisionsFound = 0;\n\n      __WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_array_for_each___default()(boxList, function (boxIndex, index) {\n        if (_this4.fixCollision(box, _this4.boxes[boxIndex])) collisionsFound++;\n      });\n\n      // Stop further checking when the next box is the last one.\n      if (nextIndex === lastIndex) return;\n\n      // Stop further checking if no collisions were found on the dragged box.\n      if (this.isSelectedBox(box) && !collisionsFound) return;\n\n      var boxIndex = this.sorted[nextIndex];\n      this.fixCollisions(this.boxes[boxIndex]);\n    },\n    fixCollision: function fixCollision(box, opponentBox) {\n      if (box.index === opponentBox.index) return false;\n      if (this.isSelectedBox(opponentBox)) return false;\n      if (!this.isIntersect(box.pos, opponentBox.pos)) return false;\n\n      var distance = box.pos.y + box.pos.h - opponentBox.pos.y;\n      this.pushDown(opponentBox, distance);\n\n      return true;\n    },\n    pushDown: function pushDown(box, distance) {\n      var y = Math.ceil((box.pos.y + distance) / 20) * 20;\n      this.$set(box.pos, 'y', y);\n    },\n    isIntersect: function isIntersect(box1, box2) {\n      if (!box1 || !box2) return false;\n\n      box1 = this.convertCoord(box1);\n      box2 = this.convertCoord(box2);\n\n      var temp = box1.left < box2.right && box2.left < box1.right && box1.top < box2.bottom && box2.top < box1.bottom;\n\n      return temp;\n    },\n    convertCoord: function convertCoord(coords) {\n      var left = typeof coords.x !== 'undefined' ? coords.x : coords.left;\n      var top = typeof coords.y !== 'undefined' ? coords.y : coords.top;\n      var width = typeof coords.w !== 'undefined' ? coords.w : coords.width || 0;\n      var height = typeof coords.h !== 'undefined' ? coords.h : coords.height || 0;\n      var right = left + width;\n      var bottom = top + height;\n\n      return { left: left, top: top, right: right, bottom: bottom };\n    },\n    setSelected: function setSelected(boxIndex) {\n      var val = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      // <-- @TODO: Refactor to use box object.\n      if (val) this.selectedSync = boxIndex;\n      if (!val && boxIndex === this.selectedSync) this.selectedSync = null;\n\n      this.boxes[boxIndex].isSelected = val;\n      this.$emit('selected', this.selectedSync);\n    },\n    clearSelected: function clearSelected() {\n      if (!this.selectedBox) return;\n\n      this.selectedBox.isSelected = false;\n      this.selectedSync = null;\n    },\n    beforeDestroyBox: function beforeDestroyBox(box) {\n      if (this.isSelectedBox(box)) this.clearSelected();\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 37:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_hammerjs__ = __webpack_require__(113);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_hammerjs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_hammerjs__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__scroll__ = __webpack_require__(59);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__select__ = __webpack_require__(60);\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  mixins: [__WEBPACK_IMPORTED_MODULE_1__scroll__[\"a\" /* default */], __WEBPACK_IMPORTED_MODULE_2__select__[\"a\" /* default */]],\n\n  props: {\n    touch: {\n      type: Object,\n      default: function _default() {\n        return null;\n      }\n    },\n\n    disableTouch: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data: function data() {\n    return {\n      // Information about the latest touch event.\n      touchSync: this.touch,\n\n      // Managers for each touch type.\n      tapManager: null,\n      dragManager: null,\n      resizeManager: null,\n\n      // Handlers for each touch events.\n      tapHandler: null,\n      dragStartHandler: null,\n      dragHandler: null,\n      dropHandler: null,\n      resizeStartHandler: null,\n      resizeHandler: null,\n      resizeEndHandler: null\n    };\n  },\n\n\n  computed: {\n    isTouching: function isTouching() {\n      if (this.touchSync && (this.touchSync.action === 'drag' || this.touchSync.action === 'resize')) return true;\n      return false;\n    }\n  },\n\n  watch: {\n    // Allows for outside control of calling callbacks.\n    touch: function touch(_touch) {\n      if (!this.isEqual(_touch)) this.handleTouch(_touch);\n    }\n  },\n\n  beforeDestroy: function beforeDestroy() {\n    this.tapManager.destroy();\n    this.dragManager.destroy();\n    this.resizeManager.destroy();\n  },\n\n\n  methods: {\n    initTap: function initTap(el) {\n      var _this = this;\n\n      this.tapHandler = function (e) {\n        _this.handleTouch(_this.getTouch('tap', e));\n      };\n      this.tapManager = new __WEBPACK_IMPORTED_MODULE_0_hammerjs__[\"Manager\"](el);\n      this.tapManager.add(new __WEBPACK_IMPORTED_MODULE_0_hammerjs__[\"Tap\"]());\n\n      this.enableTap();\n      this.initSelect();\n    },\n    enableTap: function enableTap() {\n      if (!this.tapManager) return;\n\n      this.disableTap();\n\n      this.tapManager.get('tap').set({ enable: true });\n      this.tapManager.on('tap', this.tapHandler);\n    },\n    disableTap: function disableTap() {\n      if (!this.tapManager) return;\n\n      this.tapManager.get('tap').set({ enable: false });\n      this.tapManager.off('tap', this.tapHandler);\n    },\n    initDrag: function initDrag(el) {\n      var _this2 = this;\n\n      this.dragStartHandler = function (e) {\n        _this2.handleTouch(_this2.getTouch('dragStart', e));\n      };\n      this.dragHandler = function (e) {\n        _this2.handleTouch(_this2.getTouch('drag', e));\n      };\n      this.dropHandler = function (e) {\n        _this2.handleTouch(_this2.getTouch('drop', e));\n      };\n\n      this.dragManager = new __WEBPACK_IMPORTED_MODULE_0_hammerjs__[\"Manager\"](el);\n      this.dragManager.add(new __WEBPACK_IMPORTED_MODULE_0_hammerjs__[\"Pan\"]({ direction: __WEBPACK_IMPORTED_MODULE_0_hammerjs__[\"DIRECTION_ALL\"], enable: false }));\n    },\n    enableDrag: function enableDrag() {\n      if (!this.dragManager) return;\n\n      this.disableDrag();\n\n      this.dragManager.get('pan').set({ threshold: 40, 'enable': true });\n      this.dragManager.on('panstart', this.dragStartHandler);\n      this.dragManager.on('panleft panright panup pandown', this.dragHandler);\n      this.dragManager.on('panend', this.dropHandler);\n    },\n    disableDrag: function disableDrag() {\n      if (!this.dragManager) return;\n\n      this.dragManager.get('pan').set({ 'enable': false });\n      this.dragManager.off('panstart', this.dragStartHandler);\n      this.dragManager.off('panleft panright panup pandown', this.dragHandler);\n      this.dragManager.off('panend', this.dropHandler);\n    },\n    initResize: function initResize(el) {\n      var _this3 = this;\n\n      this.resizeStartHandler = function (e) {\n        _this3.handleTouch(_this3.getTouch('resizeStart', e));\n      };\n      this.resizeHandler = function (e) {\n        _this3.handleTouch(_this3.getTouch('resize', e));\n      };\n      this.resizeEndHandler = function (e) {\n        _this3.handleTouch(_this3.getTouch('resizeEnd', e));\n      };\n\n      this.resizeManager = new __WEBPACK_IMPORTED_MODULE_0_hammerjs__[\"Manager\"](el);\n      this.resizeManager.add(new __WEBPACK_IMPORTED_MODULE_0_hammerjs__[\"Pan\"]({ direction: __WEBPACK_IMPORTED_MODULE_0_hammerjs__[\"DIRECTION_ALL\"], enable: false }));\n    },\n    enableResize: function enableResize() {\n      if (!this.resizeManager) return;\n\n      this.disableResize();\n\n      this.resizeManager.get('pan').set({ 'enable': true });\n      this.resizeManager.on('panstart', this.resizeStartHandler);\n      this.resizeManager.on('panleft panright panup pandown', this.resizeHandler);\n      this.resizeManager.on('panend', this.resizeEndHandler);\n    },\n    disableResize: function disableResize() {\n      if (!this.resizeManager) return;\n\n      this.resizeManager.get('pan').set({ 'enable': false });\n      this.resizeManager.off('panstart', this.resizeStartHandler);\n      this.resizeManager.off('panleft panright panup pandown', this.resizeHandler);\n      this.resizeManager.off('panend', this.resizeEndHandler);\n    },\n    isEqual: function isEqual(touch) {\n      return touch === this.touchSync || touch && this.touchSync && touch.e === this.touchSync.e;\n    },\n    getTouch: function getTouch(action, hammerEvent) {\n      var _hammerEvent$center = hammerEvent.center,\n          x = _hammerEvent$center.x,\n          y = _hammerEvent$center.y;\n\n\n      return {\n        action: action,\n        x: x,\n        y: y,\n        start: this.getTouchStart(hammerEvent),\n        offset: this.getTouchOffset(hammerEvent),\n        e: hammerEvent\n      };\n    },\n    getTouchStart: function getTouchStart(hammerEvent) {\n      if (this.isTouching) return this.touchSync.start;\n\n      var rect = this.$el.getBoundingClientRect();\n\n      return {\n        left: hammerEvent.center.x - rect.left - hammerEvent.deltaX,\n        top: hammerEvent.center.y - rect.top - hammerEvent.deltaY,\n        right: hammerEvent.center.x - rect.right,\n        bottom: hammerEvent.center.y - rect.bottom\n      };\n    },\n    getTouchOffset: function getTouchOffset(hammerEvent) {\n      var rect = this.$el.getBoundingClientRect();\n      var start = this.getTouchStart(hammerEvent);\n\n      return {\n        left: hammerEvent.center.x - rect.left - start.left,\n        top: hammerEvent.center.y - rect.top - start.top,\n        right: hammerEvent.center.x - rect.right,\n        bottom: hammerEvent.center.y - rect.bottom\n      };\n    },\n    updateTouchOffset: function updateTouchOffset() {\n      this.touchSync.offset = this.getTouchOffset(this.touchSync.e);\n    },\n    handleTouch: function handleTouch(touch) {\n      this.touchSync = touch;\n      var action = touch ? touch.action : null;\n\n      this.updateTouchOffset();\n      this.toggleTapSelection();\n      this.clearBrowserSelections();\n      this.touchScroll();\n      this.callCallbacks();\n\n      this.$emit('touch', this.touchSync);\n      this.$emit('isTouching', this.isTouching);\n      this.$emit(action);\n    },\n    callCallbacks: function callCallbacks() {\n      var touch = this.touchSync;\n\n      if (touch && touch.action === 'tap') this.tap();\n      if (touch && touch.action === 'dragStart') this.dragStart();\n      if (touch && touch.action === 'drag') this.drag();\n      if (touch && touch.action === 'drop') this.drop();\n      if (touch && touch.action === 'resizeStart') this.resizeStart();\n      if (touch && touch.action === 'resize') this.resize();\n      if (touch && touch.action === 'resizeEnd') this.resizeEnd();\n    },\n\n\n    // Callbacks the parent can use.\n\n    tap: function tap() {\n      // Override with a method in parent.\n    },\n    dragStart: function dragStart() {\n      // Override with a method in parent.\n    },\n    drag: function drag() {\n      // Override with a method in parent.\n    },\n    drop: function drop() {\n      // Override with a method in parent.\n    },\n    resizeStart: function resizeStart() {\n      // Override with a method in parent.\n    },\n    resize: function resize() {\n      // Override with a method in parent.\n    },\n    resizeEnd: function resizeEnd() {\n      // Override with a method in parent.\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 56:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  methods: {\n    genContent: function genContent() {\n      var data = {\n        'class': {\n          'vbox-box__content': true\n        }\n      };\n\n      return this.$createElement('div', data, [this.$slots.default]);\n    },\n    genOverlay: function genOverlay() {\n      if (this.mode === 'output') return null;\n\n      var data = {\n        'class': {\n          'vbox-box__overlay': true,\n          'vbox-box__overlay--hidden': !this.isSelectedSync || this.isTouching\n        },\n        ref: 'overlay'\n      };\n\n      return this.$createElement('div', data, []);\n    },\n    genResize: function genResize() {\n      var data = {\n        'class': {\n          'vbox-box__resize': true\n        },\n        'style': {\n          'display': this.isSelectedSync ? '' : 'none'\n        },\n        ref: 'resize'\n      };\n\n      var defaultIcon = this.$createElement('i', {\n        'class': {\n          'fa': true,\n          'fa-chevron-right': true,\n          'vbox-box__resize--rotate-45': true\n        }\n      }, []);\n\n      var resizeIcon = this.$slots.resize ? this.$slots.resize : defaultIcon;\n\n      return this.$createElement('div', data, [resizeIcon]);\n    }\n  },\n\n  render: function render(h) {\n    var data = {\n      'class': this.classes,\n      style: this.styles\n    };\n\n    return h('div', data, [this.genOverlay(), this.genContent(), this.genResize()]);\n  }\n});\n\n/***/ }),\n\n/***/ 57:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  methods: {\n    genBox: function genBox() {\n      var _this = this;\n\n      var data = {\n        ref: 'box',\n        props: {\n          touch: this.box.touch,\n          pos: this.box.pos,\n          disableTouch: true,\n          visible: this.visible\n        },\n        on: {\n          visible: function visible(_visible) {\n            _this.visible = _visible;\n          }\n        }\n      };\n\n      return this.$createElement('box', data, [this.$scopedSlots.comp()]);\n    },\n    genCompImage: function genCompImage() {\n      var data = {\n        'class': {\n          'vbox-comp__image': true\n        }\n      };\n\n      return this.$createElement('div', data, [this.$slots.compImage || this.$scopedSlots.comp()]);\n    },\n    genOverlay: function genOverlay() {\n      var data = {\n        'class': {\n          'vbox-box__overlay': true,\n          'vbox-box__overlay--hidden': !this.isSelectedSync || this.isTouching\n        },\n        ref: 'overlay'\n      };\n\n      return this.$createElement('div', data, []);\n    }\n  },\n\n  render: function render(h) {\n    var data = {\n      'class': {\n        'vbox-comp': true\n      }\n    };\n\n    return h('div', data, [this.genOverlay(), this.genBox(), this.genCompImage()]);\n  }\n});\n\n/***/ }),\n\n/***/ 58:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  methods: {\n    genWrapper: function genWrapper() {\n      var data = {\n        'class': {\n          'vbox-canvas__wrapper': true\n        },\n        ref: 'wrapper'\n      };\n\n      return this.$createElement('div', data, [this.genBoxes(), this.genShadowBox(), this.genToolbar()]);\n    },\n    genBoxes: function genBoxes() {\n      var _this = this;\n\n      var boxes = [];\n\n      this.boxes.forEach(function (box, i) {\n        boxes.push(_this.$createElement('box', {\n          key: i,\n          props: {\n            canvas: _this.canvas,\n            index: i,\n            mode: _this.mode,\n            responsive: _this.responsive,\n            pos: box.pos,\n            touch: box.touch,\n            isSelected: box.isSelected,\n            snap: _this.snap\n          },\n          on: {\n            pos: function pos(_pos) {\n              box.pos = _pos;\n            },\n            wasSnapped: function wasSnapped(_wasSnapped) {\n              _this.wasSnapped = _wasSnapped;\n            },\n            touch: function touch(_touch) {\n              box.touch = _touch;\n            },\n            isSelected: function isSelected(_isSelected) {\n              _this.setSelected(i, _isSelected);\n            },\n            isTouching: function isTouching(_isTouching) {\n              _this.isTouching = _isTouching;\n            },\n            drag: function drag() {\n              return _this.drag(box);\n            },\n            drop: function drop() {\n              return _this.drop(box);\n            },\n            resize: function resize() {\n              return _this.drag(box);\n            },\n            resizeEnd: function resizeEnd() {\n              return _this.drop(box);\n            },\n            beforeDestroy: function beforeDestroy() {\n              _this.beforeDestroyBox(box);\n            }\n          }\n        }, [_this.$slots[i], _this.genResize()]));\n      });\n\n      return boxes;\n    },\n    genToolbar: function genToolbar() {\n      if (!this.$scopedSlots.toolbar || !this.selectedBox) return;\n\n      var data = {\n        'props': {\n          canvas: this.canvas,\n          center: this.selectedBox.touch,\n          visible: this.selectedBox && !this.isTouching\n        },\n        'ref': 'toolbar'\n      };\n\n      var tools = this.$scopedSlots.toolbar(this.selectedBox.index);\n\n      return this.$createElement('toolbar', data, [tools]);\n    },\n    genResize: function genResize() {\n      if (!this.$slots.resize) return null;\n\n      return this.$createElement('div', {\n        slot: 'resize'\n      }, [this.$slots.resize]);\n    },\n    genShadowBox: function genShadowBox() {\n      if (this.mode !== 'input' || !this.selectedBox) return null;\n\n      var props = {\n        h: this.selectedBox.pos.h,\n        w: this.selectedBox.pos.w,\n        x: this.selectedBox.pos.x,\n        y: this.selectedBox.pos.y\n      };\n\n      return this.$createElement('shadow-box', { props: props }, []);\n    }\n  },\n\n  render: function render(h) {\n    var _this2 = this;\n\n    var data = {\n      'class': {\n        'vbox-canvas': true,\n        'js-vbox-canvas': true,\n        'vbox-canvas--input-mode': this.mode === 'input',\n        'vbox-canvas--output-mode': this.mode === 'output'\n      },\n      'on': {\n        'mousedown': function mousedown(e) {\n          if (e.target === _this2.$refs.wrapper) _this2.clearSelected();\n        }\n      }\n    };\n\n    return h('div', data, [this.genWrapper()]);\n  }\n});\n\n/***/ }),\n\n/***/ 59:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  data: function data() {\n    return {\n      scrollTimer: null,\n      scrollSpeed: 2,\n      scrollFactor: 2,\n      scrollEdge: 50,\n      scrollDimensions: {\n        canvas: {\n          height: null,\n          width: null\n        },\n        window: {\n          height: null,\n          width: null\n        }\n      }\n    };\n  },\n\n\n  methods: {\n    touchScroll: function touchScroll() {\n      var _this = this;\n\n      clearTimeout(this.scrollTimer);\n      if (this.isTouching && this.scroll()) this.scrollTimer = setTimeout(function () {\n        _this.touchScroll();\n      }, this.scrollSpeed);\n    },\n    scroll: function scroll() {\n      this.initScroll();\n\n      var windowWasScrolled = this.scrollWindow();\n      var canvasWasScrolled = this.scrollCanvas();\n\n      return windowWasScrolled || canvasWasScrolled;\n    },\n    initScroll: function initScroll() {\n      if (this.scrollTimer) return; // <-- Scrolling already started.\n\n      this.scrollDimensions = {\n        canvas: {\n          width: this.canvas ? this.canvas.scrollWidth : 0,\n          height: this.canvas ? this.canvas.scrollHeight : 0\n        },\n        window: {\n          width: document.body.scrollWidth,\n          height: document.body.scrollHeight\n        }\n      };\n    },\n    scrollCanvas: function scrollCanvas() {\n      if (!this.canvas) return false;\n\n      var rect = this.canvas.getBoundingClientRect();\n\n      return this.updateScroll({\n        el: this.canvas,\n        left: rect.left,\n        right: rect.right,\n        top: rect.top,\n        bottom: rect.bottom,\n        width: rect.width,\n        height: rect.height,\n        scroll: this.scrollDimensions.canvas\n      });\n    },\n    scrollWindow: function scrollWindow() {\n      return this.updateScroll({\n        el: document.body,\n        left: 0,\n        right: window.innerWidth,\n        top: 0,\n        bottom: window.innerHeight,\n        width: window.innerWidth,\n        height: window.innerHeight,\n        scroll: this.scrollDimensions.window\n      });\n    },\n    updateScroll: function updateScroll(c) {\n      var wasScrolled = false;\n\n      if (this.touchSync.x - this.scrollEdge < c.left) {\n        wasScrolled = true;\n        c.el.scrollLeft -= this.scrollFactor;\n      }\n      if (this.touchSync.y - this.scrollEdge < c.top) {\n        wasScrolled = true;\n        c.el.scrollTop -= this.scrollFactor;\n      }\n      if (this.touchSync.x + this.scrollEdge > c.right && c.el.scrollLeft + c.width + this.scrollFactor <= c.scroll.width) {\n        wasScrolled = true;\n        c.el.scrollLeft += this.scrollFactor;\n      }\n      if (this.touchSync.y + this.scrollEdge > c.bottom && c.el.scrollTop + c.height + this.scrollFactor <= c.scroll.height) {\n        wasScrolled = true;\n        c.el.scrollTop += this.scrollFactor;\n      }\n\n      return wasScrolled;\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 60:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__eventBus__ = __webpack_require__(20);\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  props: {\n    isSelected: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data: function data() {\n    return {\n      isSelectedSync: this.isSelected,\n      deselectOtherBoxesHandler: function deselectOtherBoxesHandler() {}\n    };\n  },\n\n\n  watch: {\n    isSelected: function isSelected(val) {\n      if (val !== this.isSelectedSync) this.setSelected(val);\n    }\n  },\n\n  beforeDestroy: function beforeDestroy() {\n    this.destroyDeselectOtherBoxes();\n  },\n\n\n  methods: {\n    initSelect: function initSelect() {\n      var _this = this;\n\n      this.deselectOtherBoxesHandler = function (el) {\n        if (el !== _this.$el) _this.setSelected(false);\n      };\n      __WEBPACK_IMPORTED_MODULE_0__eventBus__[\"a\" /* default */].$on('deselectOtherBoxes', this.deselectOtherBoxesHandler);\n    },\n    destroyDeselectOtherBoxes: function destroyDeselectOtherBoxes() {\n      __WEBPACK_IMPORTED_MODULE_0__eventBus__[\"a\" /* default */].$off('deselectOtherBoxes', this.deselectOtherBoxesHandler);\n    },\n    setSelected: function setSelected(isSelected) {\n      this.isSelectedSync = isSelected;\n\n      this.resolveDragResize(); // <-- Was Erik here?\n      this.deselectOtherBoxes();\n\n      this.$emit('isSelected', isSelected);\n    },\n    resolveDragResize: function resolveDragResize() {\n      if (this.isSelectedSync) {\n        this.enableDrag();\n        this.enableResize();\n      } else {\n        this.disableDrag();\n        this.disableResize();\n      }\n    },\n    toggleTapSelection: function toggleTapSelection() {\n      if (this.touchSync && this.touchSync.action === 'tap') this.setSelected(!this.isSelectedSync);\n    },\n    deselectOtherBoxes: function deselectOtherBoxes() {\n      if (this.isSelectedSync) __WEBPACK_IMPORTED_MODULE_0__eventBus__[\"a\" /* default */].$emit('deselectOtherBoxes', this.$el);\n    },\n    clearBrowserSelections: function clearBrowserSelections() {\n      if (!this.isTouching) return;\n\n      if (document.selection) {\n        document.selection.empty();\n      } else if (window.getSelection) {\n        window.getSelection().removeAllRanges();\n      }\n    }\n  }\n});\n\n/***/ }),\n\n/***/ 61:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  name: 'Toolbar',\n\n  props: {\n    canvas: {\n      type: HTMLDivElement,\n      default: function _default() {\n        return null;\n      }\n    },\n\n    center: {\n      type: Object,\n      default: function _default() {\n        return null;\n      }\n    },\n\n    offset: {\n      type: Object,\n      default: function _default() {\n        return { x: 0, y: -120 };\n      }\n    },\n\n    visible: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  mounted: function mounted() {\n    this.mounted = true;\n    this.updatePosition();\n  },\n  data: function data() {\n    return {\n      mounted: false,\n      pos: { x: -1000, y: -1000 }\n    };\n  },\n\n\n  watch: {\n    center: function center(val) {\n      this.updatePosition();\n    },\n\n    offset: function offset(val) {\n      this.updatePosition();\n    }\n  },\n\n  methods: {\n    updatePosition: function updatePosition() {\n      if (!this.center || !this.visible) this.moveOffScreen();else this.moveToTouch();\n    },\n    moveOffScreen: function moveOffScreen() {\n      this.pos = { x: -1000, y: -1000 };\n    },\n    moveToTouch: function moveToTouch() {\n      var _this = this;\n\n      var rect = this.$el.getBoundingClientRect();\n      var x = this.pos.x + this.center.x + this.offset.x - rect.left;\n      var y = this.pos.y + this.center.y + this.offset.y - rect.top;\n\n      this.pos = { x: x, y: y };\n\n      this.$nextTick(function () {\n        _this.makeAdjustments();\n      });\n    },\n    makeAdjustments: function makeAdjustments() {\n      var rect = this.$el.getBoundingClientRect();\n      var canvasRect = this.canvas.getBoundingClientRect();\n      var scrollbar = 20;\n      var overEdgeRight = canvasRect.right < rect.right ? rect.right - canvasRect.right + scrollbar : 0;\n\n      this.pos = { x: this.pos.x - overEdgeRight, y: this.pos.y };\n    }\n  },\n\n  render: function render(h) {\n    var data = {\n      'class': {\n        'vbox-toolbar': true\n      },\n      style: {\n        'left': this.pos.x + 'px',\n        'top': this.pos.y + 'px'\n      }\n    };\n\n    return h('div', data, [this.$slots.default]);\n  }\n});\n\n/***/ }),\n\n/***/ 62:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return cloneDeep; });\n/* unused harmony export debounce */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof__ = __webpack_require__(75);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof__);\n\n// See https://stackoverflow.com/a/44612374/1110941\nfunction cloneDeep(o) {\n  var newO = void 0;\n  var i = void 0;\n\n  if ((typeof o === 'undefined' ? 'undefined' : __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_typeof___default()(o)) !== 'object') return o;\n\n  if (!o) return o;\n\n  if (Object.prototype.toString.apply(o) === '[object Array]') {\n    newO = [];\n    for (i = 0; i < o.length; i += 1) {\n      newO[i] = cloneDeep(o[i]);\n    }\n    return newO;\n  }\n\n  newO = {};\n  for (i in o) {\n    if (o.hasOwnProperty(i)) {\n      newO[i] = cloneDeep(o[i]);\n    }\n  }\n  return newO;\n}\n\nfunction debounce(func, threshold, execAsap) {\n  var timeout;\n\n  return function debounced() {\n    var obj = this;\n    var args = arguments;\n\n    function delayed() {\n      if (!execAsap) func.apply(obj, args);\n      timeout = null;\n    }\n\n    if (timeout) clearTimeout(timeout);else if (execAsap) func.apply(obj, args);\n\n    timeout = setTimeout(delayed, threshold || 100);\n  };\n}\n\n\n\n/***/ }),\n\n/***/ 64:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__components_vueboxy_vueboxy__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__components_vueboxy_box__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__components_vueboxy_comp__ = __webpack_require__(35);\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Vueboxy\", function() { return __WEBPACK_IMPORTED_MODULE_0__components_vueboxy_vueboxy__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Box\", function() { return __WEBPACK_IMPORTED_MODULE_1__components_vueboxy_box__[\"a\"]; });\n/* harmony reexport (binding) */ __webpack_require__.d(__webpack_exports__, \"Comp\", function() { return __WEBPACK_IMPORTED_MODULE_2__components_vueboxy_comp__[\"a\"]; });\n\n\n\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (__WEBPACK_IMPORTED_MODULE_0__components_vueboxy_vueboxy__[\"a\" /* default */]);\n\n\n\n/***/ }),\n\n/***/ 69:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n//\n//\n//\n//\n//\n//\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  name: 'ShadowBox',\n  props: {\n\n    'h': {\n      type: Number,\n      default: 0\n    },\n\n    'w': {\n      type: Number,\n      default: 0\n    },\n\n    'x': {\n      type: Number,\n      default: 0\n    },\n\n    'y': {\n      type: Number,\n      default: 0\n    }\n  },\n\n  data: function data() {\n    return {\n      id: Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1),\n      display: 'auto'\n    };\n  },\n\n\n  computed: {\n    style: function style() {\n      return {\n        'display': this.display,\n        'top': this.y + 'px',\n        'left': this.x + 'px',\n        'width': this.w + 'px',\n        'height': this.h + 'px'\n      };\n    }\n  },\n\n  methods: {}\n});\n\n/***/ })\n\n},[64]);\n\n\n// WEBPACK FOOTER //\n// docs/js/vueboxy.312bc3ce323a01fe1e76.js","var Component = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ShadowBox.vue\"),\n  /* template */\n  require(\"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-515b312a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":\\\"src\\\",\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"}}!../../../node_modules/vue-loader/lib/template-compiler/preprocessor?engine=pug!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ShadowBox.vue\"),\n  /* styles */\n  null,\n  /* scopeId */\n  null,\n  /* moduleIdentifier (server only) */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/vueboxy/ShadowBox.vue\n// module id = 119\n// module chunks = 2","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"vbox-shadow-box\",\n    style: (_vm.style)\n  })\n},staticRenderFns: []}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-515b312a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":\"src\",\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"}}!./~/vue-loader/lib/template-compiler/preprocessor.js?engine=pug!./~/vue-loader/lib/selector.js?type=template&index=0!./src/components/vueboxy/ShadowBox.vue\n// module id = 121\n// module chunks = 2","import touch from './mixins/touch'\nimport generators from './generators/box'\n\nexport default {\n  mixins: [touch, generators],\n\n  props: {\n    'canvas': {\n      type: HTMLDivElement,\n      default: function () {\n        return null\n      }\n    },\n\n    mode: {\n      type: String,\n      default: 'input'\n    },\n\n    responsive: {\n      type: Boolean,\n      default: false\n    },\n\n    'index': {\n      type: Number,\n      default: 0\n    },\n\n    'pos': {\n      type: Object,\n      default: function () {\n        return { x: 0, y: 0, w: 0, h: 0 }\n      }\n    },\n\n    'visible': {\n      type: Boolean,\n      default: true\n    },\n\n    'snap': {\n      type: Number,\n      default: 20\n    }\n  },\n\n  mounted () {\n    this.isMounted = true\n    this.initTouch()\n  },\n\n  beforeDestroy () {\n    this.$emit('beforeDestroy', this.index)\n    this.destroyListeners()\n  },\n\n  data () {\n    return {\n      isMounted: false,\n      comp: null,\n      posSync: this.pos,\n      oldSnapPos: { x: null, y: null, h: null, w: null },\n      visibleSync: this.visible\n    }\n  },\n\n  computed: {\n    classes: function () {\n      return {\n        'vbox-box': true,\n        'vbox-box--input-mode': this.mode === 'input',\n        'vbox-box--output-mode': this.mode === 'output'\n      }\n    },\n\n    styles: function () {\n      return {\n        'top': this.posSync.y + 'px',\n        'left': this.responsiveStyles.left || this.posSync.x + 'px',\n        'width': this.responsiveStyles.width || this.posSync.w + 'px',\n        'height': this.posSync.h + 'px',\n        'visibility': this.visibleSync ? 'visible' : 'hidden'\n      }\n    },\n\n    responsiveStyles: function () {\n      if (!this.canvas || !this.responsive) return { left: null, width: null }\n\n      return {\n        left: this.posSync.x / this.canvas.getBoundingClientRect().left * 100 + '%',\n        width: this.posSync.w / this.canvas.getBoundingClientRect().width * 100 + '%'\n      }\n    },\n\n    snapPos: function () {\n      return {\n        x: Math.round(this.posSync.x / this.snap) * this.snap,\n        y: Math.round(this.posSync.y / this.snap) * this.snap,\n        w: Math.round(this.posSync.w / this.snap) * this.snap,\n        h: Math.round(this.posSync.h / this.snap) * this.snap\n      }\n    },\n\n    wasSnapped: function () {\n      const snapPos = this.snapPos\n      const old = this.oldSnapPos\n\n      return snapPos.x !== old.x || snapPos.y !== old.y || snapPos.w !== old.w || snapPos.h !== old.h\n    }\n  },\n\n  watch: {\n    pos: function (val) {\n      const old = this.posSync\n      if (this.isTouching) return // <-- Position changes are not allowed from parent during drag/resize.\n      if (val.x !== old.x || val.y !== old.y || val.w !== old.w || val.h !== old.h) this.setPosition(val)\n    },\n\n    visible: function (val) {\n      this.setVisible(val)\n    }\n  },\n\n  methods: {\n    initTouch () {\n      if (this.mode === 'output' || this.disableTouch) return\n\n      this.initTap(this.$refs.overlay)\n      this.initDrag(this.$refs.overlay)\n      this.initResize(this.$refs.resize)\n    },\n\n    setVisible (visible) {\n      this.visibleSync = visible\n      this.$emit('visible', visible)\n    },\n\n    setPosition (pos) {\n      this.oldSnapPos = this.snapPos\n      this.posSync = pos\n\n      this.$emit('wasSnapped', this.wasSnapped)\n      this.$emit('pos', this.isTouching ? this.snapPos : this.posSync)\n    },\n\n    // Touch Callbacks (from Touch mixin)\n\n    drag () {\n      const { x, y, w, h } = this.posSync\n      this.setPosition({ x: x + this.touchSync.offset.left, y: y + this.touchSync.offset.top, w, h })\n    },\n\n    drop () {\n      this.setPosition(this.snapPos)\n    },\n\n    resize () {\n      const { x, y, w, h } = this.posSync\n      this.setPosition({ x, y, w: w + this.touchSync.offset.right, h: h + this.touchSync.offset.bottom })\n    },\n\n    resizeEnd () {\n      this.setPosition(this.snapPos)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/vueboxy/box.js","import Vue from 'vue'\n\nexport default new Vue()\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/vueboxy/eventBus.js","import box from './box'\nimport eventBus from './eventBus'\nimport touch from './mixins/touch'\nimport generators from './generators/comp'\n\nexport default {\n  components: { box },\n\n  mixins: [touch, generators],\n\n  props: {\n    'value': {\n      type: Object,\n      default: function () {\n        return {\n          comp: null,\n          pos: { x: -1000, y: -1000, w: 120, h: 120 },\n          data: null\n        }\n      }\n    }\n  },\n\n  mounted () {\n    document.body.appendChild(this.$refs.box.$el)\n    this.initListeners()\n    this.initTouch()\n  },\n\n  beforeDestroy () {\n    this.destroyListeners()\n  },\n\n  data () {\n    return {\n      boxOrigRect: null,\n      box: {\n        comp: this.value.comp,\n        data: this.value.data,\n        pos: { x: 0, y: 0, w: this.value.pos.w, h: this.value.pos.h },\n        touch: null\n      },\n      visible: false,\n      wasDraggedOntoCanvasHandler: () => {}\n    }\n  },\n\n  watch: {\n    value: function (val) {\n      this.box.comp = val.comp || null\n      this.box.data = val.data || null\n      this.box.pos.w = val.w || 120\n      this.box.pos.h = val.h || 120\n    }\n  },\n\n  methods: {\n    initListeners () {\n      this.wasDraggedOntoCanvasHandler = () => { this.visible = false }\n      eventBus.$on('wasDraggedOntoCanvas', this.wasDraggedOntoCanvasHandler)\n    },\n\n    initTouch () {\n      this.initTap(this.$refs.overlay)\n      this.initDrag(this.$refs.overlay)\n    },\n\n    destroyListeners () {\n      eventBus.$off('wasDraggedOntoCanvas', this.wasDraggedOntoCanvasHandler)\n    },\n\n    dragStart () {\n      this.visible = true\n    },\n\n    drag () {\n      this.box.touch = this.touchSync\n      eventBus.$emit('dragOntoCanvas', this.box)\n    },\n\n    drop () {\n      this.visible = false\n      this.box.touch = this.touchSync\n      this.box.pos = { x: -1000, y: -1000, w: this.box.pos.w, h: this.box.pos.h }\n\n      eventBus.$emit('dropOntoCanvas', this.box)\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/vueboxy/comp.js","import box from './box'\nimport ShadowBox from './ShadowBox.vue'\nimport toolbar from './toolbar'\nimport { cloneDeep } from './utils'\nimport eventBus from './eventBus'\nimport generators from './generators/vueboxy'\n\nexport default {\n  components: { box, ShadowBox, toolbar },\n\n  mixins: [generators],\n\n  props: {\n    'value': {\n      type: Array,\n      default: function () {\n        return []\n      }\n    },\n\n    snap: {\n      type: Number,\n      default: 20\n    },\n\n    'mode': {\n      type: String,\n      default: 'input'\n    },\n\n    'responsive': {\n      type: Boolean\n    },\n\n    'selected': {\n      type: Number,\n      default: null\n    }\n  },\n\n  mounted () {\n    this.initCanvas()\n    this.initListeners()\n    this.initBoxes()\n  },\n\n  watch: {\n\n    /**\n     * The v-model value given to the component.\n     * It's synced to boxProps.\n     *\n     * @param  {Array} val The new value.\n     * @param  {Array} old The old value.\n     * @return {void}\n     */\n    value: function (val) {\n      this.valueWasEmitted ? this.valueWasEmitted = false : this.initBoxes()\n    },\n\n    mode: function (val) {\n      this.mode = val\n    },\n\n    responsive: function (val) {\n      this.responsive = val\n    },\n\n    selected: function (val) {\n      if (val === this.selectedSync) return\n      if (val === null) this.clearSelected()\n      else this.setSelected(val)\n    }\n  },\n\n  computed: {\n    selectedBox: function () {\n      return this.boxes[this.selectedSync] || null\n    }\n  },\n\n  beforeDestroy () {\n    this.destroyListeners()\n  },\n\n  data () {\n    return {\n      canvas: null,\n      valueWasEmitted: false,\n      boxes: [],\n      sorted: [],\n      history: [],\n      wasSnapped: false,\n      selectedSync: this.selected,\n      isTouching: false,\n      dragOntoCanvasHandler: () => {},\n      dropOntoCanvasHandler: () => {}\n    }\n  },\n\n  methods: {\n    initCanvas () {\n      this.canvas = this.$el\n    },\n\n    initListeners () {\n      this.dragOntoCanvasHandler = (box) => { this.dragOntoCanvas(box) }\n      this.dropOntoCanvasHandler = (box) => { this.dropOntoCanvas(box) }\n      eventBus.$on('dragOntoCanvas', this.dragOntoCanvasHandler)\n      eventBus.$on('dropOntoCanvas', this.dropOntoCanvasHandler)\n    },\n\n    destroyListeners () {\n      eventBus.$off('dragOntoCanvas', this.dragOntoCanvasHandler)\n      eventBus.$off('dropOntoCanvas', this.dropOntoCanvasHandler)\n    },\n\n    initBoxes () {\n      this.addBoxes()\n      this.sortBoxes()\n      this.pushHistory()\n    },\n\n    isTouchingCanvas (box) {\n      return this.isIntersect(box.touch, this.$el.getBoundingClientRect())\n    },\n\n    touchBox (touch) {\n      if (this.selectedBox) this.selectedBox.touch = touch\n    },\n\n    dragOntoCanvas (box) {\n      if (!this.selectedBox && this.isTouchingCanvas(box)) {\n        this.setSelected(this.addBox(box))\n        this.sortBoxes()\n        eventBus.$emit('wasDraggedOntoCanvas', true)\n      }\n\n      this.touchBox(box.touch)\n    },\n\n    dropOntoCanvas (box) {\n      this.touchBox(box.touch)\n    },\n\n    drag (box) {\n      if (!this.wasSnapped) return\n      this.resetBoxes()\n      this.fixCollisions(box)\n    },\n\n    drop (box) {\n      this.sortBoxes()\n      this.pushHistory()\n    },\n\n    addBoxes () {\n      this.boxes = []\n      for (const boxData of this.value) { this.addBox(boxData) }\n    },\n\n    addBox (boxData) {\n      const box = {\n        index: this.boxes.length,\n        comp: boxData.comp,\n        pos: boxData.pos,\n        touch: boxData.touch,\n        isSelected: boxData.isSelected,\n        data: boxData.data\n      }\n\n      this.$set(this.boxes, box.index, box)\n\n      return box.index\n    },\n\n    sortBoxes () {\n      this.sorted = this.boxes\n        .map(box => box.index)\n        .sort((a, b) => this.boxes[a].pos.y - this.boxes[b].pos.y)\n    },\n\n    pushHistory () {\n      const value = this.boxes.map((box) => ({\n        comp: box.comp,\n        pos: Object.assign({}, box.pos),\n        data: cloneDeep(box.data)\n      }))\n\n      this.history = []\n      this.history.push(value)\n      this.valueWasEmitted = true\n      this.$emit('input', value)\n    },\n\n    resetBoxes () {\n      let selectedBoxSortIndex = 0\n\n      Array.forEach(this.sorted, (boxIndex, sortIndex) => {\n        const box = this.boxes[boxIndex]\n\n        // Restore box from history.\n        if (!this.isSelectedBox(box)) this.restoreBoxFromHistory(box)\n\n        // Determine the new sort order for the selected Box.\n        if ((box.pos.y + box.pos.h) < this.selectedBox.pos.y) selectedBoxSortIndex++\n      })\n\n      this.reorderSelectedBox(selectedBoxSortIndex)\n    },\n\n    restoreBoxFromHistory (box) {\n      this.$set(box, 'pos', Object.assign({}, this.history[this.history.length - 1][box.index].pos))\n    },\n\n    reorderSelectedBox (toIndex) {\n      const oldIndex = this.getSortIndex(this.selectedBox)\n      const lastIndex = this.sorted.length - 1\n      toIndex = toIndex > lastIndex ? lastIndex : toIndex\n\n      this.sorted.splice(oldIndex, 1)\n      this.sorted.splice(toIndex, 0, this.selectedBox.index)\n    },\n\n    isSelectedBox (box) {\n      return this.selectedBox ? box.index === this.selectedBox.index : false\n    },\n\n    getSortIndex (box) {\n      return this.sorted.findIndex(value => {\n        return value === box.index\n      })\n    },\n\n    fixCollisions (box) {\n      const startIndex = this.getSortIndex(box)\n      const nextIndex = startIndex + 1\n      const lastIndex = this.sorted.length - 1\n      const boxList = this.sorted.slice(startIndex)\n      let collisionsFound = 0\n\n      Array.forEach(boxList, (boxIndex, index) => {\n        if (this.fixCollision(box, this.boxes[boxIndex])) collisionsFound++\n      })\n\n      // Stop further checking when the next box is the last one.\n      if (nextIndex === lastIndex) return\n\n      // Stop further checking if no collisions were found on the dragged box.\n      if (this.isSelectedBox(box) && !collisionsFound) return\n\n      const boxIndex = this.sorted[nextIndex]\n      this.fixCollisions(this.boxes[boxIndex])\n    },\n\n    fixCollision (box, opponentBox) {\n      if (box.index === opponentBox.index) return false\n      if (this.isSelectedBox(opponentBox)) return false\n      if (!this.isIntersect(box.pos, opponentBox.pos)) return false\n\n      const distance = (box.pos.y + box.pos.h) - opponentBox.pos.y\n      this.pushDown(opponentBox, distance)\n\n      return true\n    },\n\n    pushDown (box, distance) {\n      const y = Math.ceil((box.pos.y + distance) / 20) * 20\n      this.$set(box.pos, 'y', y)\n    },\n\n    isIntersect (box1, box2) {\n      if (!box1 || !box2) return false\n\n      box1 = this.convertCoord(box1)\n      box2 = this.convertCoord(box2)\n\n      const temp = (box1.left < box2.right &&\n              box2.left < box1.right &&\n              box1.top < box2.bottom &&\n              box2.top < box1.bottom)\n\n      return temp\n    },\n\n    convertCoord (coords) {\n      const left = typeof coords.x !== 'undefined' ? coords.x : coords.left\n      const top = typeof coords.y !== 'undefined' ? coords.y : coords.top\n      const width = typeof coords.w !== 'undefined' ? coords.w : coords.width || 0\n      const height = typeof coords.h !== 'undefined' ? coords.h : coords.height || 0\n      const right = left + width\n      const bottom = top + height\n\n      return { left, top, right, bottom }\n    },\n\n    setSelected (boxIndex, val = true) { // <-- @TODO: Refactor to use box object.\n      if (val) this.selectedSync = boxIndex\n      if (!val && boxIndex === this.selectedSync) this.selectedSync = null\n\n      this.boxes[boxIndex].isSelected = val\n      this.$emit('selected', this.selectedSync)\n    },\n\n    clearSelected () {\n      if (!this.selectedBox) return\n\n      this.selectedBox.isSelected = false\n      this.selectedSync = null\n    },\n\n    beforeDestroyBox (box) {\n      if (this.isSelectedBox(box)) this.clearSelected()\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/vueboxy/vueboxy.js","import * as Hammer from 'hammerjs'\nimport Scroll from './scroll'\nimport Select from './select'\n\nexport default {\n  mixins: [Scroll, Select],\n\n  props: {\n    touch: {\n      type: Object,\n      default: function () {\n        return null\n      }\n    },\n\n    disableTouch: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data () {\n    return {\n      // Information about the latest touch event.\n      touchSync: this.touch,\n\n      // Managers for each touch type.\n      tapManager: null,\n      dragManager: null,\n      resizeManager: null,\n\n      // Handlers for each touch events.\n      tapHandler: null,\n      dragStartHandler: null,\n      dragHandler: null,\n      dropHandler: null,\n      resizeStartHandler: null,\n      resizeHandler: null,\n      resizeEndHandler: null\n    }\n  },\n\n  computed: {\n    isTouching: function () {\n      if (this.touchSync && (this.touchSync.action === 'drag' || this.touchSync.action === 'resize')) return true\n      return false\n    }\n  },\n\n  watch: {\n    // Allows for outside control of calling callbacks.\n    touch: function (touch) {\n      if (!this.isEqual(touch)) this.handleTouch(touch)\n    }\n  },\n\n  beforeDestroy () {\n    this.tapManager.destroy()\n    this.dragManager.destroy()\n    this.resizeManager.destroy()\n  },\n\n  methods: {\n    initTap (el) {\n      this.tapHandler = (e) => { this.handleTouch(this.getTouch('tap', e)) }\n      this.tapManager = new Hammer.Manager(el)\n      this.tapManager.add(new Hammer.Tap())\n\n      this.enableTap()\n      this.initSelect()\n    },\n\n    enableTap () {\n      if (!this.tapManager) return\n\n      this.disableTap()\n\n      this.tapManager.get('tap').set({ enable: true })\n      this.tapManager.on('tap', this.tapHandler)\n    },\n\n    disableTap () {\n      if (!this.tapManager) return\n\n      this.tapManager.get('tap').set({ enable: false })\n      this.tapManager.off('tap', this.tapHandler)\n    },\n\n    initDrag (el) {\n      this.dragStartHandler = (e) => { this.handleTouch(this.getTouch('dragStart', e)) }\n      this.dragHandler = (e) => { this.handleTouch(this.getTouch('drag', e)) }\n      this.dropHandler = (e) => { this.handleTouch(this.getTouch('drop', e)) }\n\n      this.dragManager = new Hammer.Manager(el)\n      this.dragManager.add(new Hammer.Pan({ direction: Hammer.DIRECTION_ALL, enable: false }))\n    },\n\n    enableDrag () {\n      if (!this.dragManager) return\n\n      this.disableDrag()\n\n      this.dragManager.get('pan').set({ threshold: 40, 'enable': true })\n      this.dragManager.on('panstart', this.dragStartHandler)\n      this.dragManager.on('panleft panright panup pandown', this.dragHandler)\n      this.dragManager.on('panend', this.dropHandler)\n    },\n\n    disableDrag () {\n      if (!this.dragManager) return\n\n      this.dragManager.get('pan').set({ 'enable': false })\n      this.dragManager.off('panstart', this.dragStartHandler)\n      this.dragManager.off('panleft panright panup pandown', this.dragHandler)\n      this.dragManager.off('panend', this.dropHandler)\n    },\n\n    initResize (el) {\n      this.resizeStartHandler = (e) => { this.handleTouch(this.getTouch('resizeStart', e)) }\n      this.resizeHandler = (e) => { this.handleTouch(this.getTouch('resize', e)) }\n      this.resizeEndHandler = (e) => { this.handleTouch(this.getTouch('resizeEnd', e)) }\n\n      this.resizeManager = new Hammer.Manager(el)\n      this.resizeManager.add(new Hammer.Pan({ direction: Hammer.DIRECTION_ALL, enable: false }))\n    },\n\n    enableResize () {\n      if (!this.resizeManager) return\n\n      this.disableResize()\n\n      this.resizeManager.get('pan').set({ 'enable': true })\n      this.resizeManager.on('panstart', this.resizeStartHandler)\n      this.resizeManager.on('panleft panright panup pandown', this.resizeHandler)\n      this.resizeManager.on('panend', this.resizeEndHandler)\n    },\n\n    disableResize () {\n      if (!this.resizeManager) return\n\n      this.resizeManager.get('pan').set({ 'enable': false })\n      this.resizeManager.off('panstart', this.resizeStartHandler)\n      this.resizeManager.off('panleft panright panup pandown', this.resizeHandler)\n      this.resizeManager.off('panend', this.resizeEndHandler)\n    },\n\n    isEqual (touch) {\n      return ((touch === this.touchSync) || (touch && this.touchSync && touch.e === this.touchSync.e))\n    },\n\n    getTouch (action, hammerEvent) {\n      const { x, y } = hammerEvent.center\n\n      return {\n        action: action,\n        x: x,\n        y: y,\n        start: this.getTouchStart(hammerEvent),\n        offset: this.getTouchOffset(hammerEvent),\n        e: hammerEvent\n      }\n    },\n\n    getTouchStart (hammerEvent) {\n      if (this.isTouching) return this.touchSync.start\n\n      const rect = this.$el.getBoundingClientRect()\n\n      return {\n        left: hammerEvent.center.x - rect.left - hammerEvent.deltaX,\n        top: hammerEvent.center.y - rect.top - hammerEvent.deltaY,\n        right: hammerEvent.center.x - rect.right,\n        bottom: hammerEvent.center.y - rect.bottom\n      }\n    },\n\n    getTouchOffset (hammerEvent) {\n      const rect = this.$el.getBoundingClientRect()\n      const start = this.getTouchStart(hammerEvent)\n\n      return {\n        left: hammerEvent.center.x - rect.left - start.left,\n        top: hammerEvent.center.y - rect.top - start.top,\n        right: hammerEvent.center.x - rect.right,\n        bottom: hammerEvent.center.y - rect.bottom\n      }\n    },\n\n    updateTouchOffset () {\n      this.touchSync.offset = this.getTouchOffset(this.touchSync.e)\n    },\n\n    handleTouch (touch) {\n      this.touchSync = touch\n      const action = touch ? touch.action : null\n\n      this.updateTouchOffset()\n      this.toggleTapSelection()\n      this.clearBrowserSelections()\n      this.touchScroll()\n      this.callCallbacks()\n\n      this.$emit('touch', this.touchSync)\n      this.$emit('isTouching', this.isTouching)\n      this.$emit(action)\n    },\n\n    callCallbacks () {\n      const touch = this.touchSync\n\n      if (touch && touch.action === 'tap') this.tap()\n      if (touch && touch.action === 'dragStart') this.dragStart()\n      if (touch && touch.action === 'drag') this.drag()\n      if (touch && touch.action === 'drop') this.drop()\n      if (touch && touch.action === 'resizeStart') this.resizeStart()\n      if (touch && touch.action === 'resize') this.resize()\n      if (touch && touch.action === 'resizeEnd') this.resizeEnd()\n    },\n\n    // Callbacks the parent can use.\n\n    tap () {\n      // Override with a method in parent.\n    },\n\n    dragStart () {\n      // Override with a method in parent.\n    },\n\n    drag () {\n      // Override with a method in parent.\n    },\n\n    drop () {\n      // Override with a method in parent.\n    },\n\n    resizeStart () {\n      // Override with a method in parent.\n    },\n\n    resize () {\n      // Override with a method in parent.\n    },\n\n    resizeEnd () {\n      // Override with a method in parent.\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/vueboxy/mixins/touch.js","export default {\n  methods: {\n    genContent () {\n      const data = {\n        'class': {\n          'vbox-box__content': true\n        }\n      }\n\n      return this.$createElement('div', data, [this.$slots.default])\n    },\n\n    genOverlay () {\n      if (this.mode === 'output') return null\n\n      const data = {\n        'class': {\n          'vbox-box__overlay': true,\n          'vbox-box__overlay--hidden': !this.isSelectedSync || this.isTouching\n        },\n        ref: 'overlay'\n      }\n\n      return this.$createElement('div', data, [])\n    },\n\n    genResize () {\n      const data = {\n        'class': {\n          'vbox-box__resize': true\n        },\n        'style': {\n          'display': this.isSelectedSync ? '' : 'none'\n        },\n        ref: 'resize'\n      }\n\n      const defaultIcon = this.$createElement(\n        'i',\n        {\n          'class': {\n            'fa': true,\n            'fa-chevron-right': true,\n            'vbox-box__resize--rotate-45': true\n          }\n        },\n        []\n      )\n\n      const resizeIcon = this.$slots.resize ? this.$slots.resize : defaultIcon\n\n      return this.$createElement('div', data, [resizeIcon])\n    }\n  },\n\n  render (h) {\n    const data = {\n      'class': this.classes,\n      style: this.styles\n    }\n\n    return h('div', data, [this.genOverlay(), this.genContent(), this.genResize()])\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/vueboxy/generators/box.js","export default {\n  methods: {\n    genBox () {\n      const data = {\n        ref: 'box',\n        props: {\n          touch: this.box.touch,\n          pos: this.box.pos,\n          disableTouch: true,\n          visible: this.visible\n        },\n        on: {\n          visible: (visible) => { this.visible = visible }\n        }\n      }\n\n      return this.$createElement('box', data, [this.$scopedSlots.comp()])\n    },\n\n    genCompImage () {\n      const data = {\n        'class': {\n          'vbox-comp__image': true\n        }\n      }\n\n      return this.$createElement('div', data, [this.$slots.compImage || this.$scopedSlots.comp()])\n    },\n\n    genOverlay () {\n      const data = {\n        'class': {\n          'vbox-box__overlay': true,\n          'vbox-box__overlay--hidden': !this.isSelectedSync || this.isTouching\n        },\n        ref: 'overlay'\n      }\n\n      return this.$createElement('div', data, [])\n    }\n  },\n\n  render (h) {\n    const data = {\n      'class': {\n        'vbox-comp': true\n      }\n    }\n\n    return h('div', data, [this.genOverlay(), this.genBox(), this.genCompImage()])\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/vueboxy/generators/comp.js","export default {\n  methods: {\n    genWrapper () {\n      const data = {\n        'class': {\n          'vbox-canvas__wrapper': true\n        },\n        ref: 'wrapper'\n      }\n\n      return this.$createElement('div', data, [this.genBoxes(), this.genShadowBox(), this.genToolbar()])\n    },\n\n    genBoxes () {\n      const boxes = []\n\n      this.boxes.forEach((box, i) => {\n        boxes.push(\n          this.$createElement('box', {\n            key: i,\n            props: {\n              canvas: this.canvas,\n              index: i,\n              mode: this.mode,\n              responsive: this.responsive,\n              pos: box.pos,\n              touch: box.touch,\n              isSelected: box.isSelected,\n              snap: this.snap\n            },\n            on: {\n              pos: (pos) => { box.pos = pos },\n              wasSnapped: (wasSnapped) => { this.wasSnapped = wasSnapped },\n              touch: (touch) => { box.touch = touch },\n              isSelected: (isSelected) => { this.setSelected(i, isSelected) },\n              isTouching: (isTouching) => { this.isTouching = isTouching },\n              drag: () => this.drag(box),\n              drop: () => this.drop(box),\n              resize: () => this.drag(box),\n              resizeEnd: () => this.drop(box),\n              beforeDestroy: () => { this.beforeDestroyBox(box) }\n            }\n          }, [this.$slots[i], this.genResize()])\n        )\n      })\n\n      return boxes\n    },\n\n    genToolbar () {\n      if (!this.$scopedSlots.toolbar || !this.selectedBox) return\n\n      const data = {\n        'props': {\n          canvas: this.canvas,\n          center: this.selectedBox.touch,\n          visible: this.selectedBox && !this.isTouching\n        },\n        'ref': 'toolbar'\n      }\n\n      const tools = this.$scopedSlots.toolbar(this.selectedBox.index)\n\n      return this.$createElement('toolbar', data, [tools])\n    },\n\n    genResize () {\n      if (!this.$slots.resize) return null\n\n      return this.$createElement('div', {\n        slot: 'resize'\n      }, [this.$slots.resize])\n    },\n\n    genShadowBox () {\n      if (this.mode !== 'input' || !this.selectedBox) return null\n\n      const props = {\n        h: this.selectedBox.pos.h,\n        w: this.selectedBox.pos.w,\n        x: this.selectedBox.pos.x,\n        y: this.selectedBox.pos.y\n      }\n\n      return this.$createElement('shadow-box', { props: props }, [])\n    }\n  },\n\n  render (h) {\n    const data = {\n      'class': {\n        'vbox-canvas': true,\n        'js-vbox-canvas': true,\n        'vbox-canvas--input-mode': this.mode === 'input',\n        'vbox-canvas--output-mode': this.mode === 'output'\n      },\n      'on': {\n        'mousedown': (e) => {\n          if (e.target === this.$refs.wrapper) this.clearSelected()\n        }\n      }\n    }\n\n    return h('div', data, [this.genWrapper()])\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/vueboxy/generators/vueboxy.js","export default {\n  data () {\n    return {\n      scrollTimer: null,\n      scrollSpeed: 2,\n      scrollFactor: 2,\n      scrollEdge: 50,\n      scrollDimensions: {\n        canvas: {\n          height: null,\n          width: null\n        },\n        window: {\n          height: null,\n          width: null\n        }\n      }\n    }\n  },\n\n  methods: {\n    touchScroll () {\n      clearTimeout(this.scrollTimer)\n      if (this.isTouching && this.scroll()) this.scrollTimer = setTimeout(() => { this.touchScroll() }, this.scrollSpeed)\n    },\n\n    scroll () {\n      this.initScroll()\n\n      const windowWasScrolled = this.scrollWindow()\n      const canvasWasScrolled = this.scrollCanvas()\n\n      return windowWasScrolled || canvasWasScrolled\n    },\n\n    initScroll () {\n      if (this.scrollTimer) return // <-- Scrolling already started.\n\n      this.scrollDimensions = {\n        canvas: {\n          width: this.canvas ? this.canvas.scrollWidth : 0,\n          height: this.canvas ? this.canvas.scrollHeight : 0\n        },\n        window: {\n          width: document.body.scrollWidth,\n          height: document.body.scrollHeight\n        }\n      }\n    },\n\n    scrollCanvas () {\n      if (!this.canvas) return false\n\n      const rect = this.canvas.getBoundingClientRect()\n\n      return this.updateScroll({\n        el: this.canvas,\n        left: rect.left,\n        right: rect.right,\n        top: rect.top,\n        bottom: rect.bottom,\n        width: rect.width,\n        height: rect.height,\n        scroll: this.scrollDimensions.canvas\n      })\n    },\n\n    scrollWindow () {\n      return this.updateScroll({\n        el: document.body,\n        left: 0,\n        right: window.innerWidth,\n        top: 0,\n        bottom: window.innerHeight,\n        width: window.innerWidth,\n        height: window.innerHeight,\n        scroll: this.scrollDimensions.window\n      })\n    },\n\n    updateScroll (c) {\n      let wasScrolled = false\n\n      if (this.touchSync.x - this.scrollEdge < c.left) {\n        wasScrolled = true\n        c.el.scrollLeft -= this.scrollFactor\n      }\n      if (this.touchSync.y - this.scrollEdge < c.top) {\n        wasScrolled = true\n        c.el.scrollTop -= this.scrollFactor\n      }\n      if (this.touchSync.x + this.scrollEdge > c.right && c.el.scrollLeft + c.width + this.scrollFactor <= c.scroll.width) {\n        wasScrolled = true\n        c.el.scrollLeft += this.scrollFactor\n      }\n      if (this.touchSync.y + this.scrollEdge > c.bottom && c.el.scrollTop + c.height + this.scrollFactor <= c.scroll.height) {\n        wasScrolled = true\n        c.el.scrollTop += this.scrollFactor\n      }\n\n      return wasScrolled\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/vueboxy/mixins/scroll.js","import eventBus from '../eventBus'\n\nexport default {\n  props: {\n    isSelected: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  data () {\n    return {\n      isSelectedSync: this.isSelected,\n      deselectOtherBoxesHandler: () => {}\n    }\n  },\n\n  watch: {\n    isSelected: function (val) {\n      if (val !== this.isSelectedSync) this.setSelected(val)\n    }\n  },\n\n  beforeDestroy () {\n    this.destroyDeselectOtherBoxes()\n  },\n\n  methods: {\n    initSelect () {\n      this.deselectOtherBoxesHandler = (el) => { if (el !== this.$el) this.setSelected(false) }\n      eventBus.$on('deselectOtherBoxes', this.deselectOtherBoxesHandler)\n    },\n\n    destroyDeselectOtherBoxes () {\n      eventBus.$off('deselectOtherBoxes', this.deselectOtherBoxesHandler)\n    },\n\n    setSelected (isSelected) {\n      this.isSelectedSync = isSelected\n\n      this.resolveDragResize() // <-- Was Erik here?\n      this.deselectOtherBoxes()\n\n      this.$emit('isSelected', isSelected)\n    },\n\n    resolveDragResize () {\n      if (this.isSelectedSync) {\n        this.enableDrag()\n        this.enableResize()\n      } else {\n        this.disableDrag()\n        this.disableResize()\n      }\n    },\n\n    toggleTapSelection () {\n      if (this.touchSync && this.touchSync.action === 'tap') this.setSelected(!this.isSelectedSync)\n    },\n\n    deselectOtherBoxes () {\n      if (this.isSelectedSync) eventBus.$emit('deselectOtherBoxes', this.$el)\n    },\n\n    clearBrowserSelections () {\n      if (!this.isTouching) return\n\n      if (document.selection) {\n        document.selection.empty()\n      } else if (window.getSelection) {\n        window.getSelection().removeAllRanges()\n      }\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/vueboxy/mixins/select.js","export default {\n  name: 'Toolbar',\n\n  props: {\n    canvas: {\n      type: HTMLDivElement,\n      default: function () {\n        return null\n      }\n    },\n\n    center: {\n      type: Object,\n      default: function () {\n        return null\n      }\n    },\n\n    offset: {\n      type: Object,\n      default: function () {\n        return { x: 0, y: -120 }\n      }\n    },\n\n    visible: {\n      type: Boolean,\n      default: false\n    }\n  },\n\n  mounted () {\n    this.mounted = true\n    this.updatePosition()\n  },\n\n  data () {\n    return {\n      mounted: false,\n      pos: { x: -1000, y: -1000 }\n    }\n  },\n\n  watch: {\n    center: function (val) {\n      this.updatePosition()\n    },\n\n    offset: function (val) {\n      this.updatePosition()\n    }\n  },\n\n  methods: {\n    updatePosition () {\n      if (!this.center || !this.visible) this.moveOffScreen()\n      else this.moveToTouch()\n    },\n\n    moveOffScreen () {\n      this.pos = { x: -1000, y: -1000 }\n    },\n\n    moveToTouch () {\n      const rect = this.$el.getBoundingClientRect()\n      const x = this.pos.x + this.center.x + this.offset.x - rect.left\n      const y = this.pos.y + this.center.y + this.offset.y - rect.top\n\n      this.pos = { x, y }\n\n      this.$nextTick(() => { this.makeAdjustments() })\n    },\n\n    makeAdjustments () {\n      const rect = this.$el.getBoundingClientRect()\n      const canvasRect = this.canvas.getBoundingClientRect()\n      const scrollbar = 20\n      const overEdgeRight = canvasRect.right < rect.right ? rect.right - canvasRect.right + scrollbar : 0\n\n      this.pos = { x: this.pos.x - overEdgeRight, y: this.pos.y }\n    }\n  },\n\n  render (h) {\n    const data = {\n      'class': {\n        'vbox-toolbar': true\n      },\n      style: {\n        'left': this.pos.x + 'px',\n        'top': this.pos.y + 'px'\n      }\n    }\n\n    return h('div', data, [this.$slots.default])\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/vueboxy/toolbar.js","// See https://stackoverflow.com/a/44612374/1110941\nfunction cloneDeep (o) {\n  let newO\n  let i\n\n  if (typeof o !== 'object') return o\n\n  if (!o) return o\n\n  if (Object.prototype.toString.apply(o) === '[object Array]') {\n    newO = []\n    for (i = 0; i < o.length; i += 1) {\n      newO[i] = cloneDeep(o[i])\n    }\n    return newO\n  }\n\n  newO = {}\n  for (i in o) {\n    if (o.hasOwnProperty(i)) {\n      newO[i] = cloneDeep(o[i])\n    }\n  }\n  return newO\n}\n\nfunction debounce (func, threshold, execAsap) {\n  var timeout\n\n  return function debounced () {\n    var obj = this\n    var args = arguments\n\n    function delayed () {\n      if (!execAsap) func.apply(obj, args)\n      timeout = null\n    }\n\n    if (timeout) clearTimeout(timeout)\n    else if (execAsap) func.apply(obj, args)\n\n    timeout = setTimeout(delayed, threshold || 100)\n  }\n}\n\nexport { cloneDeep, debounce }\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/vueboxy/utils.js","import Vueboxy from './components/vueboxy/vueboxy'\nimport Box from './components/vueboxy/box'\nimport Comp from './components/vueboxy/comp'\n\nexport default Vueboxy\n\nexport { Vueboxy, Box, Comp }\n\n\n\n// WEBPACK FOOTER //\n// ./src/lib.js","<template lang=\"pug\">\n.vbox-shadow-box(\n    v-bind:style=\"style\"\n)\n</template>\n\n<script>\nexport default {\n  name: 'ShadowBox',\n  props: {\n\n    'h': {\n      type: Number,\n      default: 0\n    },\n\n    'w': {\n      type: Number,\n      default: 0\n    },\n\n    'x': {\n      type: Number,\n      default: 0\n    },\n\n    'y': {\n      type: Number,\n      default: 0\n    }\n  },\n\n  data () {\n    return {\n      id: Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1),\n      display: 'auto'\n    }\n  },\n\n  computed: {\n    style: function () {\n      return {\n        'display': this.display,\n        'top': this.y + 'px',\n        'left': this.x + 'px',\n        'width': this.w + 'px',\n        'height': this.h + 'px'\n      }\n    }\n  },\n\n  methods: {\n\n  }\n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// ShadowBox.vue?6e25fcb0"],"sourceRoot":""}